<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Firefly Run â€” Clean Build</title>

  <!-- No manifest here; we are disabling PWA for now -->
  <!-- Point to the new filenames (not *_v3.*) and bust caches with ?v=5 -->
  <link rel="icon" href="favicon.svg" type="image/svg+xml">
  <link rel="stylesheet" href="style.css?v=5">
</head>
<body>
  <header class="nav">
    <div class="brand">ðŸª„ Firefly Run</div>
    <nav>
      <button id="btn-play" class="btn">Play</button>
      <button id="btn-levels" class="btn ghost">Levels</button>
      <button id="btn-stats" class="btn ghost">Stats</button>
      <button id="btn-options" class="btn ghost">Options</button>
    </nav>
  </header>

  <main id="hero">
    <h1>Firefly Run â€” <span>Clean Build</span></h1>
    <p class="tag">No service worker. No v3 files. Buttons wired after DOM load.</p>
    <div class="cta">
      <button id="cta-play" class="btn xl">â–¶ Play Now</button>
      <button id="cta-how" class="btn ghost">How to Play</button>
    </div>
    <ul class="quick">
      <li>WASD / Arrows to move</li>
      <li>R to restart â€¢ Esc for menu</li>
    </ul>
    <canvas id="bg" width="1200" height="420" aria-hidden="true"></canvas>
  </main>

  <section id="panel" class="panel hidden" aria-live="polite"></section>
  <div class="canvasWrap"><canvas id="game" width="960" height="520"></canvas></div>
  <footer class="foot">Â© 2025 Firefly Run â€¢ Nature theme</footer>

  <!-- HARD KILL any old service worker + caches so v3 canâ€™t take over -->
  <script>
    (async () => {
      try {
        if ('serviceWorker' in navigator) {
          const regs = await navigator.serviceWorker.getRegistrations();
          await Promise.all(regs.map(r => r.unregister()));
        }
        if (window.caches) {
          const keys = await caches.keys();
          await Promise.all(keys.map(k => caches.delete(k)));
        }
      } catch (e) {}
    })();
  </script>

  <script defer src="game.js?v=5"></script>
</body>
</html>
